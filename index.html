<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SafeSphere - Home</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<nav>
  <img src="/safe-sphere-pwa/assets/logo.png" class="logo" alt="SafeSphere logo">
  <a href="/safe-sphere-pwa/index.html">Home</a>
  <a href="/safe-sphere-pwa/listing.html">Listing</a>
  <a href="/safe-sphere-pwa/post.html">Post</a>
  <a href="/safe-sphere-pwa/admin.html">Admin</a>
  <a href="/safe-sphere-pwa/roommates.html">Roommates</a>
  <a href="/safe-sphere-pwa/feedback.html">Feedback</a>
  <a href="add-roommate.html">Add Roommate</a>
</nav>




<header class="banner">
  Find verified, safe student housing in Niagara.
</header>

<section id="listings-container">
  <p>Loading...</p>
</section>

<script type="module">
import { db, onSnapshot, collection, query, orderBy } from "./firebase.js";

const box = document.getElementById("listings-container");

/* ðŸŽ¨ ImÃ¡genes aleatorias */
const houseImages = [
  "assets/houses/house1.jpg",
  "assets/houses/house2.jpg",
  "assets/houses/house3.jpg",
  "assets/houses/house4.jpg",
  "assets/houses/house5.jpg"
];

function getRandomImage() {
  return houseImages[Math.floor(Math.random() * houseImages.length)];
}

/* ðŸ”¥ Cargar posts aprobados */
onSnapshot(
  query(collection(db, "posts"), orderBy("createdAt", "desc")),
  snap => {
    box.innerHTML = "";

    snap.forEach(doc => {
      const p = doc.data();
      if (p.status !== "approved") return;

      const img = getRandomImage();

      box.innerHTML += `
        <div class="card">
          <img src="${img}" class="card-img">
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <p><b>$${p.price}</b></p>
        </div>
      `;
    });
  }
);
</script>

</body>
</html>

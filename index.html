<script type="module">
import { db, onSnapshot, collection, query, orderBy } from "./firebase.js";

const box = document.getElementById("listings-container");

// ðŸŽ¨ Lista de imÃ¡genes aleatorias
const houseImages = [
  "assets/houses/house1.jpg",
  "assets/houses/house2.jpg",
  "assets/houses/house3.jpg",
  "assets/houses/house4.jpg",
  "assets/houses/house5.jpg"
];

// FunciÃ³n que devuelve 1 imagen random
function getRandomImage() {
  return houseImages[Math.floor(Math.random() * houseImages.length)];
}

// ðŸ”¥ Cargar posts aprobados
onSnapshot(
  query(collection(db, "posts"), orderBy("createdAt", "desc")),
  snap => {
    box.innerHTML = "";

    snap.forEach(doc => {
      const p = doc.data();
      if (p.status !== "approved") return;

      box.innerHTML += `
      <div class="card">
          <img src="${getRandomImage()}" class="card-img">
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <p><b>$${p.price}</b></p>
      </div>
      `;
    });
  }
);
</script>


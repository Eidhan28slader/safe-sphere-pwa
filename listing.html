<script type="module">
import { db, collection, onSnapshot, query, orderBy } from "./firebase.js";

const postsBox = document.getElementById("posts");

// ðŸŽ¨ Lista de imÃ¡genes aleatorias
const houseImages = [
  "assets/houses/house1.jpg",
  "assets/houses/house2.jpg",
  "assets/houses/house3.jpg",
  "assets/houses/house4.jpg",
  "assets/houses/house5.jpg"
];

// FunciÃ³n para escoger 1 imagen random
function getRandomImage() {
  return houseImages[Math.floor(Math.random() * houseImages.length)];
}

// ðŸ”¥ Mostrar solo posts aprobados
onSnapshot(
    query(collection(db, "posts"), orderBy("createdAt", "desc")),
    snapshot => {

        postsBox.innerHTML = "";

        let hasData = false;

        snapshot.forEach(doc => {
            const p = doc.data();

            if (p.status !== "approved") return;

            hasData = true;

            postsBox.innerHTML += `
                <div class="card">
                    <img src="${getRandomImage()}" class="card-img">
                    <div class="card-body">
                        <h3>${p.title}</h3>
                        <p>${p.desc}</p>
                        <p><strong>Price:</strong> $${p.price}</p>
                        <span class="badge verified">Approved</span>
                    </div>
                </div>
            `;
        });

        if (!hasData) {
            postsBox.innerHTML = "<p>No approved posts yet.</p>";
        }
    }
);
</script>


